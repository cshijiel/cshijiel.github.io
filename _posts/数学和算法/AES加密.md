title: "AES加密"
date: 2015-04-07 00:20:36
tags: 
- AES
- 加密
- 算法
categories: 数学和算法
---
## 加密的历程：
从 **按规则替换** -> **对称加密** -> **非对称加密** 的过程，看到加密技术的不断进化。

### 破解方式：
按规则替换：根据频率破解。  
对称加密：截获密钥。  
非对称加密：？？？    

## 非对称加密：
非对称加密又称公开密钥加密。
>公开密钥加密（英语：public-key cryptography，又译为公开密钥加密），也称为非对称加密（asymmetric cryptography），一种密码学算法类型，在这种密码学方法中，需要一对密钥，一是个私人密钥，另一个则是公开密钥。这两个密钥是数学相关，用某用户密钥加密后所得的信息，只能用该用户的解密密钥才能解密。如果知道了其中一个，并不能计算出另外一个。因此如果公开了一对密钥中的一个，并不会危害到另外一个的秘密性质。称公开的密钥为公钥；不公开的密钥为私钥。  
>--**wiki**

在非对称加密中使用的主要算法有：RSA、Elgamal、背包算法、Rabin、D-H、ECC（椭圆曲线加密算法）等。

### 优点
与对称密钥加密相比，优点在于无需共享的通用密钥，解密的私钥不发往任何用户。即使公钥在网上被截获，如果没有与其匹配的私钥，也无法解密，所截获的公钥是没有任何用处的。

### 过程
假设两个用户A向B发送信息。B的公钥为c，对应私钥（也是属于B的）为d，明文为x.  

1. A用公钥对明文进行加密形成密文c(x)，然后传输密文；  
2. B收到密文，用私钥对密文进行解密d(c(x)),得到要通信的明文x。
B向A发送信息反之。

现在主要解释RSA加密原理。

----------

## 原理
### 互质关系
如果两个正整数，除了1以外，没有其他公因子，我们就称这两个数是互质关系（coprime）。比如，15和32没有公因子，所以它们是互质关系。这说明，不是质数也可以构成互质关系。

有以上，不难得到以下结论：  

1. 任意两个质数构成互质关系，比如13和61。  
2. 一个数是质数，另一个数只要不是前者的倍数，两者就构成互质关系，比如3和10。  
3. 如果两个数之中，较大的那个数是质数，则两者构成互质关系，比如97和57。  
4. 1和任意一个自然数是都是互质关系，比如1和99。  
5. p是大于1的整数，则p和p-1构成互质关系，比如57和56。  
6. p是大于1的奇数，则p和p-2构成互质关系，比如17和15。  

### 欧拉函数
请思考一下问题：

>任意给定正整数n，请问在小于等于n的正整数之中，有多少个与n构成互质关系？（比如，在1到8之中，有多少个数与8构成互质关系？）  
>--阮一峰

计算这个值的方法就叫做欧拉函数，以φ(n)表示。在1到8之中，与8形成互质关系的是1、3、5、7，所以 φ(n) = 4。  
φ(n) 的计算方法并不复杂，但是为了得到最后那个公式，需要一步步讨论。  
#### 第一种情况
如果n=1，则 φ(1) = 1 。因为1与任何数（包括自身）都构成互质关系。

#### 第二种情况
如果n是质数，则 φ(n)=n-1 。因为质数与小于它的每一个数，都构成互质关系。比如5与1、2、3、4都构成互质关系。

#### 第三种情况
如果n是质数的某一个次方，即 n = p^k (p为质数，k为大于等于1的整数)，则
$$\phi(p^k)=p^k-p^{k-1}$$
比如 φ(8) = φ(2^3) =2^3 - 2^2 = 8 -4 = 4。
这是因为只有当一个数不包含质数p，才可能与n互质。而包含质数p的数一共有p^(k-1)个，即1×p、2×p、3×p、...、p^(k-1)×p，把它们去除，剩下的就是与n互质的数。
上面的式子还可以写成下面的形式：
$$\phi(p^k)=p^k-p^{k-1}=p^k(1-\frac{1}{p})$$
可以看出，上面的第二种情况是 k=1 时的特例。

#### 第四种情况
如果n可以分解成两个互质的整数之积，
$$n=p_1*p_2$$
则
$$\phi(n)=\phi(p_1p_2)=\phi(p_1)\phi(p_2)$$
即积的欧拉函数等于各个因子的欧拉函数之积。比如，**φ(56)=φ(8×7)=φ(8)×φ(7)=4×6=24**。    
这一条的证明要用到"中国剩余定理"，这里就不展开了，只简单说一下思路：如果a与p1互质(a<p1)，b与p2互质(b<p2)，c与p1p2互质(c<p1p2)，则c与数对 (a,b) 是一一对应关系。由于a的值有φ(p1)种可能，b的值有φ(p2)种可能，则数对 (a,b) 有φ(p1)φ(p2)种可能，而c的值有φ(p1p2)种可能，所以φ(p1p2)就等于φ(p1)φ(p2)。

#### 第五种情况
待续...

---未完待续：http://www.ruanyifeng.com/blog/2013/06/rsa_algorithm_part_one.html